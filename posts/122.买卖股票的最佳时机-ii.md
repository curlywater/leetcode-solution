---
title: 122.买卖股票的最佳时机-ii
date: "2020-11-08"
topic: [每日一题, 动态规划]
---

# 思路一

无限次数买卖，卖出后即可买入，可以是连续区间。因此只需要求整体峰与谷的差距。

``` js
var maxProfit = function (prices) {
 	let result = 0;
  
  for (let i = 1, len = prices.length; i < len; i++) {
    result += Math.max(0, prices[i + 1] - prices[i]);
  }
  
  return result;
}
```

# 思路二

动态规划

``` js
var maxProfit = function(prices) {
    // 第i天的状态：持有/未持有 (1/0)
    // 选择：持有 -> 保持/买入 未持有 -> 等待/卖出
    // dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i])
    // dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] - prices[i])
    // dp[0][0] = 0;
    // dp[0][1] = -Infinity;
    // dp_i  = max(dp_i, dp_j + prices[i]);
    // dp_j = max(dp_j, dp_i - prices[i]);

    let dp_i = 0;
    let dp_j = -Infinity;
    let temp;

    for (let i = 0, len = prices.length; i < len; i++) {
        temp = Math.max(dp_i, dp_j + prices[i]);
        dp_j = Math.max(dp_j, dp_i - prices[i]);
        dp_i = temp;
    }

    return dp_i;
};
```

